{
    "version": "https://jsonfeed.org/version/1",
    "title": "Sansui's blog",
    "home_page_url": "https://sansui233.com",
    "feed_url": "https://sansui233.com/feed.json",
    "description": "记录学习和生活的个人博客",
    "author": {
        "name": "Sansui",
        "url": "https://sansui233.com/about.ico"
    },
    "items": [
        {
            "id": "https://sansui233.com/posts/2023-11-29-windows-shell-configuration",
            "content_html": "<h2>常用 shell</h2>\n<p>一直以来 windows 的命令行方案都很多，都不好用，怎么配置也是仁者见仁智者见智的一个事情。先总结一下常用shell 方案</p>\n<ul>\n<li><code>powershell</code> 官方shell，各种工具库支持最全，缺点自带的命令太长，以至于完全没有日常使用的想法。</li>\n<li><code>msys2系列</code> windows 上的类 unix 环境，基于现代Cygwin (POSIX兼容层) 和 MinGW-w64（工具包），特点是确实像unix，一般命令可以无缝迁移。缺点是没有包管理，兼容性有问题很多环境要手动配（可以说几乎所有），像是conda init 自己写，npm补全执行出错，很多命令执行起来都有问题，无数个坑。心累</li>\n<li><code>git bash</code> 基本同上，工具更多，加载更慢。</li>\n<li><code>wsl</code> 完全的 Linux 子系统，缺点是太占内存。</li>\n</ul>\n<h2>方案选择</h2>\n<p>我需求</p>\n<ul>\n<li>常用命令必须是类 unix 命令</li>\n<li>有包管理器，第三方工具配置友好</li>\n<li>不要太占内存</li>\n</ul>\n<p>结果发现这就是经典的三圈相交，没有任何一个常用方案能满足以上要求。</p>\n<p>最后，我决定用 powershell。除了第一条外都满足。后面两条属于难以解决的硬伤，而第一条可以编写脚本，将常用的命令模拟。</p>\n<h3>powershell 配置流程</h3>\n<p>包含工具包、终端美化。</p>\n<ol>\n<li>Install the latest Powershell Core</li>\n<li>Install <a href=\"https://gitforwindows.org/\">git-bash</a> for basic bash and git tools</li>\n<li>Install <a href=\"https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701?hl=zh-cn&amp;gl=cn&amp;rtc=1\">Windows Terminal</a> and open Powershell</li>\n<li>Install <a href=\"https://github.com/PowerShell/PSReadLine\">PSReadLine</a></li>\n<li>Install <a href=\"https://github.com/dahlbyk/posh-git\">posh-git</a></li>\n<li>Install <a href=\"https://ohmyposh.dev/\">oh-my-posh</a> for showing extra info in term.</li>\n<li>Install <a href=\"https://github.com/gerardog/gsudo\">gsudo</a> for softlink</li>\n<li>open <code>$PROFILE</code> in powershell, append the contents of <a href=\"https://gist.github.com/Sansui233/0451b8f7c354d600c4efa74fc284d39c#file-microsoft-powershell_profile-ps1\"><strong>Microsoft.PowerShell_profile.ps1</strong></a></li>\n</ol>\n<p>大致介绍一下用途。</p>\n<ul>\n<li>git-bash，一系列类 unix 工具，git 一类的</li>\n<li>Windows Ternimal，微软的终端。我拒绝终端用electron 去套的……</li>\n<li>PSReadLine，改变一系列 powershell 的行为。比如复制粘贴的快捷键。可惜在 vscode 里会没用，只能右键粘贴。</li>\n<li>posh-git，显示 git 的状态</li>\n<li>oh-my-posh，美化。具体主题可能需要会自己改一下，要么丑，要么不支持提示 conda 环境或者 npm 环境。</li>\n<li>gsudo，提权，类似 unix 的 sudo。可能运行时会被杀软报毒，需要加入信任区。</li>\n</ul>\n<p>powershell 的用户配置文件输入 <code>$PROFILE</code> 就能找到。</p>\n<p>我的配置文件上传到了 <a href=\"https://gist.github.com/Sansui233/0451b8f7c354d600c4efa74fc284d39c#file-microsoft-powershell_profile-ps1\"><strong>Microsoft.PowerShell_profile.ps1</strong></a>。需要挂代理打开。配置文件包含 <code>ls</code> <code>ln</code> <code>open</code> <code>grep</code> <code>which</code> 等命令模拟。powershell 的缩写默认支持了 <code>mv</code> <code>cat</code> <code>rm</code> 等命令，配合起来日常基本够用。</p>\n<h2>终端代理</h2>\n<p>我在配置文件中设置了<code>proxy</code>和<code>unproxy</code>函数，以快速设置与取消终端的代理连接。自己改下端口就能用。因为我自己习惯上不开系统代理，都是软件内的 http 连接。</p>\n<h2>其他常用工具</h2>\n<ul>\n<li>\n<p>winget：自带的包管理器，命令行工具都是这个装的。部分用的 scoop，非常少。还有的直接用的官网 setup。</p>\n</li>\n<li>\n<p>nvim：命令行编辑器，vim 的替代品。我用的是发行版 AstroNvim。之前也有自己折腾插件，太懒得维护了，算了。</p>\n</li>\n<li>\n<p>nodejs：JS 环境，nvim 的插件要用，开发也要用</p>\n</li>\n<li>\n<p>zoxide：快速跳转目录。最有用的功能没有之一。类似 unix 的 autojump</p>\n</li>\n<li>\n<p>Terminal-Icons：ls 命令加 icon，还能解决 ls 不高亮的问题。但是，颜色很丑。但是，我不也想再配置了，配置真的心好累。</p>\n</li>\n<li>\n<p>ripgrep：类似 grep 的用法。我在模拟 grep 命令时只是单纯替换成了 findstr，真的 grep 建议用 ripgrep (rg) 替代。nvim 的 telescope 一些插件也会用到。</p>\n</li>\n</ul>\n<p>安装脚本汇总：</p>\n<pre><code class=\"hljs language-powershell\">winget install conda\r\n\r\nwinget install neovim\r\ngit clone --depth 1 https://github.com/AstroNvim/AstroNvim ~/.config/nvim\r\n\r\nwinget install gerardog.gsudo\r\nwinget install OpenJS.NodeJSLTS\r\nInstall-Module -Name Terminal-Icons -Repository PSGallery; Import-Module -Name Terminal-Icons\r\n# z-jump\r\nwinget install zoxide # z-jump, see https://github.com/ajeetdsouza/zoxide\r\nwinget install BurntSushi.ripgrep.MSVC # grep 的完全替代品\n</code></pre>",
            "url": "https://sansui233.com/posts/2023-11-29-windows-shell-configuration",
            "title": "Windows 命令行相关配置",
            "summary": "一些 powershell 相关配置",
            "date_modified": "2023-11-29T04:07:00.000Z",
            "date_published": "2023-11-29T04:07:00.000Z",
            "tags": [
                "工具"
            ]
        },
        {
            "id": "https://sansui233.com/posts/thoughts-about-wubi-im",
            "content_html": "<p>每次看到打字的视频，总是会有人说五笔是最快的。五笔我打了八年。突发奇想去测试了一下五笔打字的输入速度，结果在我意料之内——在不刻意飙手速（以不被室友打）的情况下，大概是60字/min，全拼大概是70字/min。</p>\n<p>虽然拼音我现在已经非常不熟练了，但速度还是比五笔快。而五笔在日常使用也并没有感觉到有什么不顺畅的地方，为什么测速还是会更慢呢？</p>\n<h2>五笔更慢的原因</h2>\n<p>网上说五笔打得更快大多是指“看打下的极限速度”。这里有两个条件，一个是看打，一个是极限。</p>\n<h3>看打和听打</h3>\n<p>看打，指看着一段文字打出来，在早期没有各种扫描技术时，录文件就是这样的纯手工录入方式。</p>\n<p>看打有利于五笔的拆字输入，而且不论一个人的普通话是否标准，只要认字都能使用。早期学者非常多会看字但念不准的。</p>\n<p>早期输入法（智能ABC）没有云计算，也没有词库，几乎一个字一个字蹦出来，非常非常慢。我小学拼音打冰灯用尽全力的记录也就 55字/min，不算快的但也不算慢了。但现在五笔随意打初见就 70 字/min，途中还有好几个字不会拆的。想想在当时的那个环境，只靠打单字和少量词组，就能达到百字每分，是多么牛逼的一件事。</p>\n<p>但在日常打字的时候，大部分人纯聊天，更多是使用的听打，想到什么说什么，就算口中没有真的发出声音。这明显是利于拼音打字的。另外，拼音打字的韵母键位非常固定，像 ing 这样的三字母韵母，打起来非常连贯，在这瞬间可以一秒按8个键，任何人打字多一点都能做到。真正意义上想说什么打什么。</p>\n<p>我的名字拼音一共有(10-15)个字母，可以在 1.5 秒内打完全拼。拼音的输入速度完全不慢，重码问题也几乎靠技术解决了。在纠错、词库、上下文联想早就发展起来的情况下，五笔在日常使用上真的没有什么优势。</p>\n<h3>极限速度？</h3>\n<p>这就是一个老生常谈的问题了———学习成本。</p>\n<p>如果仅仅靠日常打字，五笔要多久，拆字的顺畅程度可以达到打拼音一年的水平？</p>\n<p>我的答案是：除非刻意练习，否则永远达不到。拆字顺畅，不会卡住自己的表达，是一个需要长期刻意练习的技能。</p>\n<p>听起来可能有点夸张，但事实如此。</p>\n<p>我在日常使用时，对于常用字，五笔输入也已经是条件反射，不太去想字形，和拼音差距也不大。但是测速文章就是另一回事了。各种领域的名词、人名等，总有你不适应的那一款（五笔大佬请无视）。不会拆时那个感觉真的难受，一分钟打一个字。</p>\n<p>比如 “凿个洞”“凹凸不平”“藏族” 一类的词，对于拼音都非常简单且没有重码。但对于五笔，不是常用词且难拆，测速文里这类词很多。我有一个长长的清单，随时记录这类难以练到的字。</p>\n<p>注意，以上的前提是“日常打字”。这里可能会有人对“日常”有一点误解，需要再澄清一下，日常不等于简单，而是“日常生活交流中的常用语言”。比如“藏族”，小学生都会念，还会写，但不日常。</p>\n<p>五笔变小众的原因正在于高昂的学习成本，有没有不那么痛的学习方法吗？</p>\n<p>有。我自己一向不是死记硬背型的人，基本是用什么学什么直接开干。日语没背五十音图，靠记了一首歌词入门，五笔也没有背码表，看了原理后，一个区一个区地打一级简码二级简码入门。遇到不会的就查，会的就越来越多。</p>\n<p>但是不那么痛的学习方法问题就是上面所说的，仅靠日常打字，想在遇到任何情况下都拆字顺畅，永远也不可能（记忆超群的五笔大佬当我没说）。</p>\n<p>那个“不熟悉的列表”，我专门打了也有七八遍了，里面的所有字能顺利拆出来了，但每个字还是要花时间反应。</p>\n<p>同学妈妈打了几十年五笔工作，也只是在她的专业领域得心应手，换到不熟悉的领域同样卡壳。不要看贴子说打得越久越熟悉，这个年头没有几个人是为了打字而打字的，打字说是表达，是个有应用场景的事，有场景就有范围限定，有范围限定就有上限。你平时能练到的字，就这么多。</p>\n<p>诚然，五笔的极限是很快，但为此需要付出的刻意练习，并不值得，除非你喜欢。</p>\n<h3>软件问题</h3>\n<p>86版编码是经典的五笔编码，但我现在使用的98版五笔，因为有一天实在不能忍受86版那个莫名其妙的笔顺了，还有一些为了降低重码而设置的不合理末笔码。</p>\n<p>但是后来我发现，有很长一段时间，我都在把98版的字根表和86版弄混——我在学86版五笔时从来没有去背过字根表，都是靠肌肉记忆，肌肉和脑袋打架，于是混乱了。</p>\n<p>另外，对于不会拆的字，想不起来的字，我会使用拼音反查。自从 ios 有98五笔后我就在使用苹果的输入法，因为可以接第三方键盘，还可以输入emoji。但我反查了很长一段时间后才发现，苹果的编码，可以说是有巨量的错误，把86和98版混到了一起，一字完全不同的两码什么的，有时候打86版的拆法也能出字，反查编码的时候更是灾难。我对98版的拆字方式长期处于一种混乱状态。</p>\n<p>后来就换了 rime，好了很多。但是手机上 rime 最近大更新后，反查和逐码提示功能都没法用了，这两个功能都是 lua 插件支持，难说和新的渲染方式是不是有什么不兼容。现在就很纠结，在考虑要不还是换回去吧。</p>\n<p>另外，mac上清歌很好用。windows 上的五笔输入法其实都不太好用，除非你会自己开发。</p>\n<p>如果说选五笔输入法软件有什么硬性条件的话，1是基本词库+方便的自造词功能，2是精确的反查，3是 z 键打重复字和特殊符号，4是良好的中英混输。有这四点，可以薄杀 100% 的 win 平台五笔输入法了。</p>\n<h2>为什么我还要用五笔</h2>\n<p>话说回来，既然五笔打得没有拼音快，还费脑子，为什么我还要用五笔呢？</p>\n<p>一是，当习惯了不重码后，很难再接受重码的输入法。不论是不是日常用语，99%的情况下五笔都不需要选字，不需要翻列表。你可以轻易打出“艹”和“卄”，同时也不会影响你正常打“草”。</p>\n<p>当然，拆不出字时也会很难受。</p>\n<p>二是，永远不需要联网，隐私问题。</p>\n<p>三是，好的输入法设计真的好。当时知道 z 键万能键打特殊符号原来这么好用时简直惊呆了。自从用了五笔，我从来都没有使用 -&gt; 打箭头过，从来都是 →。希腊字母、带圈数字、拼音音标也非常好打。当朋友提醒我写的 logseq theme 没有连字箭头时，我才发现压根没有注意到原来 logseq 后来加入了连字字体。</p>\n<hr/>\n<p>好困😴 睡觉</p>",
            "url": "https://sansui233.com/posts/thoughts-about-wubi-im",
            "title": "大概是关于五笔打字更慢的一点碎碎念？",
            "summary": "嘎？",
            "date_modified": "2023-11-17T01:59:00.000Z",
            "date_published": "2023-11-17T01:59:00.000Z",
            "tags": [
                "Diary"
            ]
        },
        {
            "id": "https://sansui233.com/posts/2023-11-11-typescript-generatic-type-proble-ts2322",
            "content_html": "<p>最近遇到这么一个需求。</p>\n<blockquote>\n<p>定义一个函数接口，要求其返回值类型是 type A 的任意超集。</p>\n</blockquote>\n<p>于是我按直觉写下了：</p>\n<pre><code class=\"hljs language-typescript\"><span class=\"hljs-keyword\">type</span> A  = { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-built_in\">string</span> }\r\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">FuncA</span>  = &lt;T <span class=\"hljs-keyword\">extends</span> A&gt;<span class=\"hljs-function\">() =&gt;</span> T\r\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">f</span>: <span class=\"hljs-title class_\">FuncA</span> = <span class=\"hljs-function\">() =&gt;</span> {\r\n  <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-string\">&quot;ok&quot;</span> } \r\n}\n</code></pre>\n<p>人来看非常简单知道是什么意思，就是返回值包含所有 a 的属性，其他属性全是可有可无的。</p>\n<p>这段代码扔给 GPT，它也看不出什么毛病。但事实上，在 return 时报了一个错：</p>\n<pre><code class=\"hljs language-text\">Type &#x27;() =&gt; A&#x27; is not assignable to type &#x27;FuncA&#x27;.\r\n  Type &#x27;A&#x27; is not assignable to type &#x27;T&#x27;.\r\n    &#x27;A&#x27; is assignable to the constraint of type &#x27;T&#x27;, but &#x27;T&#x27; could be instantiated with a different subtype of constraint &#x27;A&#x27;.ts(2322)\n</code></pre>\n<p>这个报错非常的不 helpful。因为平时， typescript 可以根据返回值推测出具体函数标注。比如</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">foo</span>(<span class=\"hljs-params\"></span>){\r\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;1&quot;</span>\r\n} <span class=\"hljs-comment\">// 自动推断出函数的具体签名为 () =&gt; string</span>\n</code></pre>\n<p>那为什么上面的报错例子，不能做这样的推断呢？</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">type</span> A  = { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-built_in\">string</span> }\r\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">FuncA</span>  = &lt;T <span class=\"hljs-keyword\">extends</span> A&gt;<span class=\"hljs-function\">() =&gt;</span> T\r\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">f</span>: <span class=\"hljs-title class_\">FuncA</span> = <span class=\"hljs-function\">() =&gt;</span> {\r\n  <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-string\">&quot;ok&quot;</span> } \r\n} \r\n<span class=\"hljs-comment\">/* 推断出具体的签名类似于\r\n() =&gt; {\r\n  a: string;\r\n  [name: string]: any\r\n}\r\n*/</span>\n</code></pre>\n<p>也就是说，a 是必选属性，其他属性全是 optional。</p>\n<p>（先不讨论 Object 的 key 可以是 Symbol，只是为了看起来好理解，我只写了 string。要写全这里又要多写一个类型推断。）</p>\n<p>当然这里又引发了另一个问题：你为什么不直接把 type A 定义附加任意可选属性？</p>\n<p>好问题，这是一个正常的解决 TS2322 问题的思路。但是我就是想知道为什么泛型推断不能直接做这个……</p>\n<p>我查了很多资料，没有人完美解释这个问题。但有一个相似的问题：如何让参数和返回值持有相同的泛型类型？</p>\n<p>在 typescript 的 <a href=\"https://github.com/microsoft/TypeScript/issues/50027\">github issue</a> 里有详细的案例说明，务必看看，很好懂，说是故意这么设计的。这里我将理由简短概括如下：</p>\n<blockquote>\n<p>如果 f 是上有一个额外的属性 prop，编译器如果推导出了返回值类型成 typeof f。之后你调用 f.prop，静态编译不会报错，但实际上有一个 runtime error，因为你的真实的返回值只是一个 <code>()=&gt;{}</code> ，没有prop 属性。</p>\n</blockquote>\n<p>但个人觉得这里静态编译应该报错，并不是一个 runtime 错误。前面说了，typescript 可以对返回值进行静态的类型的检查。以上面 issue 为例，理想的报错设计是长这样：</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">type</span> A = <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-built_in\">void</span>;\r\n<span class=\"hljs-keyword\">type</span> B = <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-built_in\">void</span>;\r\n\r\n<span class=\"hljs-comment\">// 类型签名为 &lt;T extends A | B&gt;(value: T) =&gt; T 的实现</span>\r\n<span class=\"hljs-keyword\">function</span> f1&lt;T <span class=\"hljs-keyword\">extends</span> A | B&gt;(<span class=\"hljs-attr\">value</span>: T): T {\r\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">() =&gt;</span> {};  <span class=\"hljs-comment\">// 推断出 T 此时是 typeof ()=&gt;{}，也就是 ()=&gt;{}</span>\r\n}\r\n\r\n<span class=\"hljs-keyword\">let</span> <span class=\"hljs-attr\">f</span>: <span class=\"hljs-built_in\">any</span>= <span class=\"hljs-function\">()=&gt;</span>{}\r\nf.<span class=\"hljs-property\">prop</span> = <span class=\"hljs-string\">&quot;haha&quot;</span>\r\n\r\n<span class=\"hljs-title function_\">f1</span>(f) <span class=\"hljs-comment\">// 这里传参报错，因为 typeof f 和 typeof ()=&gt;{} 不一致。本质上就是 ts2322 描述的问题，但不应该在上面报错</span>\n</code></pre>\n<p>当然上面的例子返回值类型已经定了是 <code>typeof ()=&gt;{}</code>，返回值再标注 T 显得十分多此一举。但是 f1 对只是对这个函数签名的一种实现。完全可以实现对这个函数签名有不同的实现，返回不同的 subtype。</p>\n<blockquote>\n<p>什么是 subtype？T extends A，T 就是 A 的 subtype</p>\n</blockquote>\n<p>这又引发了另一个问题：这和函数重载有什么区别？</p>\n<p>当然有区别啊，最大的区别就是我能定义一个统一的函数接口，只要返回值满足最基本的约束 <code>A</code>。但可以是返回不同的 subtype，实现也分开写到不同的文件里，类似于 oop 语言中返回所有某基类的派生类。这才是完全体。</p>\n<p>但现在的 typescript 完全做不到这一点，返回值只能是一个非常具体的 type，要么就抛出一个毫无说服力的 ts2322 错误。</p>\n<p>如果要解决开头的问题，大概是以下三个思路：</p>\n<ul>\n<li>定义 A 时，把所有可能要用到的属性都写到可选属性里，或直接 <code>[name: string]: any</code>。</li>\n<li>考虑业务场景，其他未知属性不留下会影响到什么吗。99% 的场景是没有必要的，也就是说这个需求就是没意义的。剩下的 1% 我没有遇到/想到。</li>\n<li>根据输入参数的 T 写一个类型推导，手动将返回的类型设置为 a 的具体扩展类型。类似这样</li>\n</ul>\n<pre><code class=\"hljs language-typescript\"><span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Extend</span>&lt;T <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-built_in\">object</span>&gt; = {\r\n  [<span class=\"hljs-attr\">name</span>: <span class=\"hljs-built_in\">string</span>]: <span class=\"hljs-built_in\">any</span>\r\n} &amp; {\r\n  [K <span class=\"hljs-keyword\">in</span> keyof T]: T[K]\r\n}\r\n\r\n<span class=\"hljs-keyword\">type</span> A  = {<span class=\"hljs-attr\">a</span>: <span class=\"hljs-built_in\">string</span>}\r\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">FuncA</span>  = <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title class_\">Extend</span>&lt;A&gt;\r\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">f</span>: <span class=\"hljs-title class_\">FuncA</span> = <span class=\"hljs-function\">() =&gt;</span> {\r\n  <span class=\"hljs-keyword\">return</span> { <span class=\"hljs-attr\">a</span>: <span class=\"hljs-string\">&quot;ok&quot;</span>, <span class=\"hljs-attr\">b</span>:<span class=\"hljs-string\">&quot;extra&quot;</span>} \r\n} \r\n<span class=\"hljs-title function_\">f</span>().<span class=\"hljs-property\">a</span> <span class=\"hljs-comment\">// a is string</span>\r\n<span class=\"hljs-title function_\">f</span>().<span class=\"hljs-property\">b</span> <span class=\"hljs-comment\">// b is any</span>\n</code></pre>\n<p>总之，在目前的 typescript 中，<strong>返回值类型不能是泛型</strong>。</p>\n<p>当然这样也失去了扩展的类型检查，等于是用了函数的签名来检查的，和返回值的类型一点关系也没有。</p>\n<p>现在 typescript 的静态检查器其实已经做了一些运行时的功能，比如条件语句判断以排除属性。但是，这些像运行时一样的检查只在静态类型不明确时才起作用。就这个 if，我已经遇到了好几次无法判断的 bug ，清空缓存并重启才恢复。</p>\n<p>说回第二点，既然你允许传了任意值，也就说明在你这个库中，你也不知道其他附加值具体是拿来干什么的，大多无非遍历一下再过滤一下。如果是静态类型检查器来遍历，诶诶扩展属性怎么全是 any。最终还得用 JS 的运行时来做这个事情……所以有拿来做什么的话早就在 A 里增加 optional 属性了。这也是为什么说 99% 的场景这个需求其实不存在。</p>\n<p>还有一个更重要的原因，那就是，ts 的类型体操，实在太他妈难写了。</p>\n<hr/>\n<p>可能没用的参考：</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/56505560/how-to-fix-ts2322-could-be-instantiated-with-a-different-subtype-of-constraint\">typescript - How to fix TS2322: &quot;could be instantiated with a different subtype of constraint &#x27;object&#x27;&quot;? - Stack Overflow</a></li>\n<li><a href=\"https://github.com/microsoft/TypeScript/issues/50027\">Could be instantiated with a different subtype of constraint · Issue #50027 · microsoft/TypeScript</a></li>\n</ul>",
            "url": "https://sansui233.com/posts/2023-11-11-typescript-generatic-type-proble-ts2322",
            "title": "关于 typescript 泛型中返回值类型约束的问题",
            "summary": "全是坑",
            "date_modified": "2023-11-11T22:26:00.000Z",
            "date_published": "2023-11-11T22:26:00.000Z",
            "tags": [
                "学习"
            ]
        },
        {
            "id": "https://sansui233.com/memos?id=2023-11-04 06:49",
            "content_html": "<h2>2023-12-07 04:52:48</h2>\n<p>Gawainx 毕业啦，毕业快乐。</p>\n<p>另外一位 b 站认识不久的网友也快了。那就提前毕业快乐吧，有机会我也想认识三次元的 enfp 哈哈。</p>\n<p>在线好友: 1 今年6月已经毕业啦，要留学啦，读博后啦，恭喜。</p>\n<p>虽然 6 月时你想帮我时大概是惊㤉到了，怎么有人宁愿先嗑 cp 也不愿先写论文，你说你不知道我出了问题，那是最后一通电话了，不算快乐的电话。但其实你一直没有明白我说的不想科研是什么意思，因为除开科研以外我实在太正常了。科研有困难很正常的是吧，你遇到的困难也肯定比我多，也不会往别的方面想。其实打到后面我这边几乎说不出话，不是不想说，而是我不愿让人听见我不够平静的声音。</p>\n<p>祝你们毕业快乐。</p>\n<h2>2023-12-07 00:21:41</h2>\n<p>突然对 logseq 插件没兴趣了……头好痒啊，好痒，得洗头，但澡堂开放时我全程在睡觉。最近睡得有点子过多了，每天能醒不到 10 小时。</p>\n<p>喜欢听很萌很快乐的歌。虽然听起来有点变态，但我是很喜欢萝莉音的，不是很刻板尖尖的萝莉音，而是『ユイカ』那样的声音（年龄感再偏小一些）。我也喜欢小女孩子，小女孩子能穿得简单很舒服的那种造型就更好了。我也喜欢仍然喜欢听摇滚，和二次元特定风格的温柔男孩子。古典在想提升逼格时会喜欢听，但日常还是想轻松一些。最不喜欢的是节奏重复的土嗨舞曲。</p>\n<p>我喜欢不被人关注，喜欢当边缘人，但也喜欢所有的朋友。我其实也很喜欢舔但前提是舔的人不会在意我在舔（于是只能赛博舔网友）。我不喜欢被夸奖，但喜欢被理解。以上，这就是三水的自我介绍了，或者说是事故介绍吧，哈哈。</p>\n<p>对了，sansui 其实是三水的拼音，这个角度来说我也是实名上网，但不想被熟人一眼认出来所以去掉了翘舌音，所以我也不知道要怎么读，每次默念都是嘶……233，挺怪的 id。</p>\n<h2>2023-12-05 19:08:43</h2>\n<p>什么都可以是假的，但鸣佐不能(咆哮！)</p>\n<p>要不我引入一下微博的表情包吧……阴阳怪气第一名的表情包。但缺一个编辑器嗯……为什么 Typora 不能有插件！（咆哮！）</p>\n<h2>2023-12-02 05:38:21</h2>\n<p>最近突然很喜欢工具风格的外观，比较紧凑的 UI，细线简单分区的那种。没有太多字体上和间距上的 scale，主打一个稳定和无与伦比的统一感。啊救命，喜好能不能不要一直变变变，已经喜欢无边框的好久了，现在又喜欢回细边框的，审美是一个轮回，其实只要字体和间距不要太拉，看一个 txt 都能看得眉清目秀。</p>\n<p>有图标、细线，良好的分区，就足以完成一个耐看的外观了，不用赶时髦，也不用想太多理论。虽然牛逼的平面设计出的 scale 确实牛逼，但大部分时候都是一坨💩。其实论实用性也只要做到干净统一就可以了。</p>\n<h2>2023-12-02 03:04:36</h2>\n<p>好烦现在的屏幕，真的是五彩斑斓的黑。虽然我选产品的时候有专门注意屏幕参数，但果然还是不行，就typora的这个标题，都能看出外框正黑，菜单栏是冷黑，但正文的Next主题灰黑色又发暖发青。就是这个发暖发青，真的绝了，没法好好配色。还是只有高饱和才能压色偏吗…</p>\n<p>我眼睛好像对于低饱和变化是比较敏感一点，高饱和颜色看不了太长时间，很难受，经常画出来颜色会发灰，因为选色时老觉得颜色已经变了很多了很丰富了，过几天一看……这不都差不多是灰色吗？？</p>\n<h2>2023-12-01 06:29:35</h2>\n<p>对了，我终于看完了《齐木楠雄的灾难》，看了两个月……这是少见的越看越好看的日常动画，看完的时候严重戒断反应。两个月来有空的时候就会看看看，睡不着也开着看看很快就能睡觉，因为节奏特别快，看20分钟像过了一个小时似的。看着人物形象越来越立体，我以为他们的故事会一直持续下去，结果就突然没了……网飞原创那一集的结局也非常非常棒，比原作还要好的感觉。</p>\n<p>我最喜欢的日常动画还是《在下齐木，有何贵干》。虽然很短，但脑洞真的很独特，下下下下下辈子都想不到的操作。而且总是很暖心，结尾结得真的好！</p>\n<p>这两个搞笑动画虽然表面有一点像，但内核是很不一样的。《齐木》比较电波系一点，人物会重置的，所以完结时总觉得他们的世界在继续。《坂本》给人感觉更像有连续性的独立故事，到最后所有的矛盾都很好地解决了。</p>\n<p>唯一可惜的是，坂本的作者去世了😭幸好她说她的一生很快乐，这就足够了。目前的在播动画已经成为她的遗作。</p>\n<p>然后我算了算动画的经费，只是画的部分，逐帧的画一人一天撑死画两秒（原画+上色的流程），分工的话加上导演编剧分镜后期一原二原中割色指定场景摄影配音……也是一天两秒（可能还不到），质量高很多的两秒。两秒差不多是一个镜头吧，不算长也不算很短的镜头。这么算下来2秒花2万块是再正常不过的事了……真的可怕。如果前期有好好规划，比如导演分镜编剧都是一个人，色指定和场景摄影是一个人（原画真的省不了因为就是时间堆的）成本会更低，但也低不到哪里去，能一人多职的都是大佬……</p>\n<p>如果去学动画，最开始会发现，画了两秒，好开心！坚持一个月，积少成多！结果一个月后，也画不过一分钟……而 TV 番组都是20分钟，真的是很大的工程。所以国内很多泡面番，因为做起来真的太难了，投入与回报完全不成正比。</p>\n<p>我又想了下为什么动画的投入产出这么不成正比，原因其实在于……画风。摄影作品什么的再怎么调滤镜都是写实风，镜头语言剧本风格改起来又没有改变画风这么慢。声音作品也是如此，也是写实的。如实记录是很快的事情，但创作也就越慢，成本也越高。3D动捕的成本也比2D好一些，但3D也是永远有一种3D感，包括原神。用3D去模拟真正的2D并不会更快。</p>\n<p>想起了双城之战，有人问你们的人物为什么就像画的一样，他们说：“We paint!” 他们就是用画的纹理。</p>\n<p>2D 永远有一种独特的抽象感，我不认为它为消失，相反，随着具象事物的泛滥，抽象的东西会变得越来越珍贵。</p>\n<h2>2023-12-01 05:56:22</h2>\n<p>更新了 logseq，发现有一点 breaking change，所以主题也更新了一下。非常佛系，也没有看社区，现在越来越懒了……只是他们新加的组件最好不要动。一直在删删删旧代码。</p>\n<p>我博客也是一直在改改改样式，也是没有仔细设计，细节上有挺多设计不一致的。比如圆角的弧度对齐……因为从前设计整体是方形，所以 post 的搜索做的是偏方角。但是 memo 整体是圆角的……然后 memo 的搜索框有 border，因为那边信息量比较多，图标也是以线条为主的，没有border反而感觉很怪异。但是其他地方又都是无边框的，唉……设计很难的！要感觉简洁但又要让人感觉不要太空，twitter那样的分块是最好的。可以的话我倒是想抄，但其实也没有那么适合个人博客，因为个人博客的布局是非常不固定的，不是 app，还是很喜欢长文占满一整页的感觉。有个东西叫 usememos，我用不了……树形分类与长文是有必要的，基础的导航也是有必要的，强迫症会比较开心。</p>",
            "url": "https://sansui233.com/memos",
            "title": "碎碎念001",
            "date_modified": "2023-11-03T22:49:00.000Z",
            "date_published": "2023-11-03T22:49:00.000Z",
            "tags": [
                "Diary"
            ]
        },
        {
            "id": "https://sansui233.com/posts/2023-10-09-the-little-prince-review",
            "content_html": "<p>《小王子》在不同年龄阶段都看过，中译和原著也都读过，当时只是觉得有趣。但尝试自己写故事后，才惊觉其实所有的有趣都是是作者的刻意表达。</p>\n<p>仅仅以生活中的“有趣”与“想象力”写出的故事远远不够，别人看起来并没有你认为的那么有趣，内核是空洞的。</p>\n<p>人在成年人后，所经历的一切容易让笔下故事的发展陷入自身所见所闻，很难写出孩子般质朴的想象，无法逃离现实的束缚。</p>\n<p>举个例子，如果你的故事需要一个超现实的“天体引力”进行推动，你会用怎样的方式让这样的力产生？</p>\n<p>我搜集了很多宇宙的资料，试图从中找到什么想法。但事实上我并不是想写硬科幻，也没人想在简短的剧情中读一大堆物理考据。</p>\n<p>我对此一筹莫展，觉得怎样都编不出一个合理的解释……最后决定拉出上帝作为隐喻，上帝按自己心意去裁定天体引力。听起来很离谱吧，就好像是小孩子的瞎想，仅仅是“上帝裁定天体引力”不也是一具无意义空壳吗？但如果将这个设定赋予别的象征，就不再是无意义的。或者说，我其实是想象征什么，才拉出一个离谱的上帝。不过这个处理我也并不满意，但一时想不到更好的方法。</p>\n<p>幻想的意义不在于幻想本身，而是幻想对故事带来的推动。感到有趣的事在深入思考后也不仅是罕见、超现实的表象，它会带来的新体验，又或者：“喜剧的内核是悲剧”。</p>\n<p>今天复看《小王子》，试图从写故事的角度去理解，作者在下笔时是带着怎样的想法与心情呢？或是单纯是觉得有趣吗？怎么想出这些光怪陆离的可爱小故事？我是一个强逻辑性的Ne人，这样的思考也许能提高一下Ni的水平，带来一些不一样的启发。</p>\n<h2>第1章</h2>\n<p>介绍“我”与“大人”之间的区别。</p>\n<p>“我”在成为大人后 ，依然有着孩子般的心灵。如果不是这样，后文的“我”将是一个很难理解小王子的大人。体现这一点是“蛇吞象”与“帽子”的故事（作者真的很会想）。大人看东西只关注现实，不现实的事情对于大人毫无意义。</p>\n<h2>第2-7章</h2>\n<p>介绍小王子的由来。</p>\n<p>“我”困在沙漠中时遇到来自另一个星球的小王子，一个礼貌的、有点忧伤的小王子。小王子想要我画一只绵羊给他，但挑三拣四，最后对一只藏在箱子里看不见的小绵羊表示满意，还觉得小羊在箱子里睡着了。</p>\n<p>为什么想到在这里安排这么一只奇怪的绵羊，如果仅仅想有趣，那安排一只会走钢丝的山羊不行吗？读到最后才隐隐有了答案——美丽的事物往往是不被看见的，这也许是“箱子里的羊”的动机。</p>\n<p>第6章的写小王子星球上的猴面包树。从编剧的角度，不描写羊吃什么食物也无伤故事发展，但写了，还写的是特别具体也不常见的猴面包树，大概是有什么想法在里面的。猴面包树是会无限扩张的、不好的东西，但这和小王子的生活有什么关系呢，也就是多了一些并不让人开心的日常打扫。</p>\n<p>我不认为这里是象征自私的欲望、野心，小王子的星球上没有出现这类元素的必要性，含义也并不太深刻，在后续别的星球遇到更合理。后来看知乎上感觉有一个（我认为）挺靠谱的说法：</p>\n<blockquote>\n<p>作者发表时正值二战期间，作者是一名法国人，国土沦丧旅居纽约。旅居纽约的法国人又分成戴高乐派和维希派，他想劝告两派捐弃前嫌共同对敌，却遭到两派的夹攻，非常无奈，这三棵灌木正是代表法西斯的德国、意大利和日本。</p>\n</blockquote>\n<p>破坏这份宁静的、疯长的、夺取人生存空间的猴面包树。</p>\n<p>然后引出了对于小王子最重要的玫瑰花。作者是先想到绵羊再编出的玫瑰花，还是本来就想写玫瑰花与小王子的故事、再编出绵羊？如果以先写大纲让剧情先行的角度，我偏向于后者。无论以何种方式开始，绵羊和玫瑰花的情节是精妙契合的。情节的前后衔接一向不是一个简单的事情，如果先写剧情可能人物 ooc，如果先写人物可能会想不出后续，好多长篇就是这么坑掉的……</p>\n<p>这部分里还有一些别的情节，比如说谈到小王子的星球叫做行星 B612 时，讽刺了大人们喜欢以衣冠取人，关注外在与代号，不关注人的本质。</p>\n<p>小王子的星球上还有两座活火山一座死火山，非常有趣的脑洞，对剧情发展没什么用但并不觉得无聊，气质很符合小王子的星球（氛围渲染也是有必要的？）。小王子有一天最多看了43次日落，后文对不同星球的日落次数描写对比起来也非常有趣。至此基本表现出了小王子日常生活。</p>\n<h2>第8-9章</h2>\n<p>玫瑰花与小王子的相处这两章浪漫温柔，明显以人物情感先行，对话自然发生。剧情上没有太多刻意安排。有刻意安排的剧情是小王子最后一时冲动生了玫瑰花的气，离星出走。虽说是生气了，但看起来还是十分的文艺……整个文笔的基调就是这样的，very童话。</p>\n<h2>第10-15章</h2>\n<p>离星出走章节。不同星球上住着不同的奇怪大人，写得非常直白。后面有许多章节都会显得较为独立且直白，是娓娓道来的日常故事。</p>\n<p>第10章：有理性但放不下权威架子的大人。</p>\n<p>第11章：爱慕虚荣的大人。</p>\n<p>第12章：永远在犯同样错误的酒鬼。非常短，像四格漫画一样，但闭环的对白好有趣。</p>\n<p>第13章：除了钱和财产再脑子也容不下别的东西的商人。一些人看到什么东西就觉得是自己的，什么也不做就想据为己有，像是在讽刺资本主义的起源嗯……</p>\n<p>第14章：守规矩的、不知变通的打工人。观看一千多次日落这个吐槽也很有趣，像是人物先行写出来的。</p>\n<p>第15章：不出门的地理学家。看到好多模板的影子：不深入基层的高高在上的 leader、掉书袋不实践的人、把别人的成果据为己有的人、不切实际的甲方。地理学家知道地球，但连自己的星球上有没有大洋和火山都不知道，却觉得理所当然。</p>\n<h2>第16-19章</h2>\n<p>小王子来地球的见闻。</p>\n<p>第16章介绍地球。</p>\n<p>第17章小王子来到地球寻找人类，第一个遇见的毒蛇是为以后小王子回家埋下的伏笔（好残忍）。</p>\n<p>第18章向花问路的写作视角很有趣。以花的视角，人没有根，所以被风送走了。</p>\n<p>第19章的回声有点类似空镜的作用？我不理解，但隐约觉得好像是有用的，好可爱。</p>\n<h2>第20-21章</h2>\n<p>算是主线章节（？）很多玫瑰的花圃，小王子最初知道自己的玫瑰在外形上不是独一无二的后，很伤心。但小狐狸的出现又让他明白了</p>\n<blockquote>\n<p><strong>正是因为小王子在玫瑰身上花费的时间，才使得玫瑰变得如此珍贵。因此单她一朵，就胜过了这世间所有。</strong></p>\n</blockquote>\n<p>此外小狐狸还教会了他仪式感。</p>\n<h2>第22-23章</h2>\n<p>永远在向往别处，行色匆匆，忽视脚下风景的人。</p>\n<p>永远在节省时间，追求效率的现代人。</p>\n<h2>第24-25章</h2>\n<p>沙漠里的井水，突出主题的两章，和星星上的玫瑰花一样。这个情节的设置和作者的自身经历有关，对于没有经历过的人而言难以复刻。</p>\n<blockquote>\n<p>“沙漠美丽，因为沙漠的某处隐藏着一口井。”</p>\n</blockquote>\n<blockquote>\n<p>“房子也好，星星、沙漠也好，美化他们的东西，是肉眼看不见的。”</p>\n</blockquote>\n<h2>第26-27章</h2>\n<p>小王子通过死亡回去了，“我”不舍。这两章人物先行，对白比较重要。</p>\n<p>总体感想是，这是一本给成年人读的童话。我清楚记得我小学时看到第一章，只觉得这是一个有点可爱的怪孩子。到高中时，可以感受到文笔有童话的美好，但并不太理解作者要表达什么。大学时看原著也没有懂，纯学英文去了。直到现在才对里面的情节有所体会。小王子的“童真”是人在成长过程中需要慢慢获得的，是成年人的反思，在小时候的记忆中类似的想法我从未存在过。小时候反而会现实得多，真正的小孩子有着更原始更本能的残酷。</p>\n<p>语文考试总是在问“作者在这一段想要表达什么”，小时候总觉得有时候是出题想太多。现在觉得，不是的，但也不应该有标准答案。刻意设计的剧作可以解释，很多人带着心情自然而然书写而成的东西，自己也是无法准确剖析的。剖析自己对每个人都是困难的，何况是一纸之隔的他人呢。</p>",
            "url": "https://sansui233.com/posts/2023-10-09-the-little-prince-review",
            "title": "重读《小王子》",
            "summary": "以故事写作的角度重读童话《小王子》",
            "date_modified": "2023-10-09T13:56:00.000Z",
            "date_published": "2023-10-09T13:56:00.000Z",
            "tags": [
                "书评"
            ]
        },
        {
            "id": "https://sansui233.com/posts/2023-09-29-windows-system-chinese-fonts-adjustment",
            "content_html": "<blockquote>\n<p>以下仅适用于低于 4k 缩放 200% 的显示器</p>\n</blockquote>\n<p>微软雅黑作为随着 Windows7 出现的字体，加上遥遥领先（？）的 ClearType，在当时的 1080p 显示器上十分清晰易读。</p>\n<p>但如今的显示器分辨率越来越高，旧版微软雅黑的设计存在着明显的缺陷。</p>\n<p>一是其字形设计并不平衡，中宫过大，有的字形可以以难看来形容；二是微软雅黑字形只在 4K 屏上有着准确的显示。如果你不巧像我一样用着 2.5K 屏，在 ClearType 的加持下，仔细观察资源管理器侧边栏中，“桌面”二字短横的间距并不平衡。</p>\n<p>微软曾经设计过“另一版的微软雅黑”，即 Noble Scarlet，但不知出于何种原因并没有在正式的系统中使用。这一版字体设计依然中宫偏大，但相对老版收敛了不少，平衡了一些。据传言汉字部分是兰亭黑 Pro。</p>\n<p>但这个字体在标点处理上很差，最直观的就是中文引号，太像西文的处理方式，很难看出前引号与后引号的区别。其实我在写这一篇文的时候，换了 Typora 的字体，才发现前后引号全打反了……</p>\n<p>个人推荐的配置和工具如下：</p>\n<ul>\n<li><strong>Noble Scarlet</strong>  替换系统的微软雅黑。由于版权原因无官方公开链接，需自行搜索</li>\n<li>系统字体替换工具：自行搜索 “字体替换工具 by 随风飘扬”。win7 时代的产物，太古老了找不到原作者出处。替换完后最好重启，否则可能有一些错误，比如字体大小错误。另外，github 上还有一个非侵入式的系统字体替换工具 <a href=\"https://github.com/Tatsu-syo/noMeiryoUI\">noMeiryoUI</a>，但是换不全，只是作为预览不同字体在系统上的效果倒是个很不错的工具。</li>\n<li><a href=\"https://www.mactype.net/\"><strong>MacType</strong></a> 改善 ClearType 丢细节带来的不平衡</li>\n<li>安装一个 <strong>苹方</strong>。有一些中文网站 Fallback Font 也是苹方在前。由于版权原因无官方公开链接，需自行搜索。浏览器对于字体的渲染不受 MacType 的影响，在PPI不足的情况下，浏览器的渲染是偏细的，默认设置还得是微软雅黑。</li>\n<li><strong><a href=\"https://source.typekit.com/source-han-serif/cn/\">思源宋体</a></strong>：推荐将浏览器的 Serif 字体设置为此字体。默认的宋体真的，不论中文英文，都很丑……只适合打印。</li>\n</ul>\n<p>苹方是一款设计上很优秀的字体，但它对于低 PPI 的显示器不友好，人话说，不是4K屏缩放200%都别用。</p>\n<p>首先苹方粗体相对其他黑体本身就较细，在 ClearType 下，苹方被削掉的细节使得其字重偏小，Bold 看起来像 Medium。</p>\n<p>另外，苹方在 2.5K 屏上表现非常糊，毕竟苹方问世时已经 Retina 屏已经出了好久了，人家压根没考虑过在低 PPI 屏幕上的表现。最后是版权问题，当然苹果大概不会因为这点事起诉个人用户。</p>\n<p>更纱黑体也非常适合作为 windows 的系统字体，在 1080p 和 2.5k 下都能保证良好的清晰度。相比起微软的两款字体，更纱黑体可以称得上是秀气了，但汉字覆盖率不如系统级别的字体。</p>\n<p>自己看下来，更纱黑体与思源黑体设计的细节不太统一，比如“用”字明显矮了一截，使句子看起来不太稳定。但是在宋体设计上，“用”字矮的这一截反而让字体看起来平衡。一个系列的字体的统一感和比例关系又很大，个人理解为思源/更纱系列是优先考虑宋体的字形，但也不是传统的宋体字形，和黑体的比例有一定的结合。整体而言还是宋体的设计更加优秀。</p>\n<p>思源黑体作为更纱黑体的前辈，是不太适合低 ppi 屏的，它的 Regular 字重看起来像 Bold。</p>",
            "url": "https://sansui233.com/posts/2023-09-29-windows-system-chinese-fonts-adjustment",
            "title": "Windows 调整之中文字体",
            "summary": "让 windows11 字体更好看的一些设置与字体浅谈",
            "date_modified": "2023-09-29T02:25:00.000Z",
            "date_published": "2023-09-29T02:25:00.000Z",
            "tags": [
                "工具"
            ]
        },
        {
            "id": "https://sansui233.com/posts/2023-09-26-minecraft-settings-for-v1-20",
            "content_html": "<p>在 Minecraft 1.20 版本光照引擎被大幅改写，使得帧数提升，模组的数量似乎又多了起来。另外在 fabric 发展起来以后，mod的社区生态有了很大的变化，有很多老牌模组有了更新的替代。现在记录一下实现常用的基本功能需要的模组与修改设置。</p>\n<p>我使用的 hmcl 启动器，在其中进行模组下载可显示模组间的依赖情况。以下内容在1.20.1中完全兼容，且项目均在维护中。</p>\n<h2>Mods</h2>\n<p>使用以 fabric-api 构建的模组。</p>\n<h3>渲染类</h3>\n<ul>\n<li>Sodium: 渲染优化之神，许多模组的前置</li>\n<li>Sodium-extra: 渲染优化之神的扩展，相应 GUI 为reeses sodium options</li>\n<li>Lithium: 原版机制的算法改进</li>\n<li>Iris: Sodium 加光影</li>\n<li>Custom Entity Models: 自定义实体模型，增强对 optifine 材质包的支持</li>\n<li>Continuity: 无缝纹理，安装后需要启用相应的材质包</li>\n<li>Indium: 许多模组的前置，提供 Fabric Rendering API的支持</li>\n</ul>\n<h3>功能类</h3>\n<ul>\n<li>modmenu: 显示所有模组和相应的设置页面（如果有的话）</li>\n<li>carpet: 单人生存必备，可使用命令放置假人以常加载区块刷红石</li>\n<li>tweakeroo: 一系列微调的小功能。主要使用 freecamera（灵魂出窍）以获得更好的摄影视角，zoom 开启类似 optifine 的按 c 视角放大，handrestock 可自动补货手里的工具、方块</li>\n<li>JourneyMap: 小地图，降肝度必备。Xae 的小地图也不错，两者都需要设置一下显示的东西，默认会非常多，我只开启了玩家、时间、坐标。关闭了各种网络显示和生物显示。</li>\n<li>Invertory Profile Next: 高版本的 R 键背包整理，强迫症必备。另有捡物品时默认扔到背包中，以及在打开箱子时使用滚轮移动物品，个人非常喜欢，更快，且减少食指的腱鞘炎。</li>\n<li>Roughly Enough Items: 物品搜索，查看合成配方、查看方块用途，ctrl点击后快速移动到合成台。尽管原版有合成书，但一页条目显示太少，且不支持拼音搜索，不支持模组物品。REI依旧方便很多。</li>\n<li>imblock: 输入法冲突修复</li>\n</ul>\n<h2>设置</h2>\n<ul>\n<li>画面尺寸: 1920*1080@60fps，窗口化</li>\n<li>视场角: 85</li>\n<li>鼠标灵敏度: 75</li>\n<li>模拟距离：8</li>\n<li>渲染距离：10</li>\n</ul>\n<h3>快捷键修改</h3>\n<p>首先把 ctrl 改到 capslock 键位，方便疾跑。系统全局 powertoys 改的（吐槽一万句control的键位）</p>\n<ul>\n<li>tab 长按: 快速显示背包中物品，在 tweakroo 中的 hotbarswapbase 设定</li>\n<li>tab+1/2/3: 快捷键切换到背包中下一行。 tweakroo 中的 hotbarswap 每一行单独设定</li>\n<li>j: 显示 jouneymap 小地图</li>\n<li>m: 显示 jouneymap 大地图和设定</li>\n<li>v: 切换第三人称视角，很常用的功能。原本是f5，实在太远了</li>\n<li>f5:  灵魂出窍，在 tweakroo 的 freecamera 中设定</li>\n<li>z: 望远镜，在 tweakroo 的 zoomactivate 中设定</li>\n</ul>\n<h4>合成台、箱子UI</h4>\n<ul>\n<li>y: REI 查看光标下物品的配方</li>\n<li>u: REI 查看光标下物品用途</li>\n<li>ctrl + 左键点击REI的物品，移动物品到合成台</li>\n<li>r: Invertory Profile Next 整理。按 r+c 在 IPN 的设置中修改</li>\n<li>使用滚轮以在背包和箱子间移动物品，按shift移动整组</li>\n</ul>\n<h2>光影</h2>\n<ul>\n<li>BSL v8.2.04，默认配置High，把 Camera 中的 Bloom 关闭，把 Atmosphere 中的 fog 调到 0.5，开启 lighting 中的handDynamicLight。抗锯齿的TAA随便开不开，取决于风扇响不响</li>\n<li>Complementary Reimagined，默认配置 medium，high 会开启镜面反射运算量明显变大</li>\n</ul>\n<h2>材质</h2>\n<ul>\n<li>任意矿物发光材质。比如 <a href=\"https://www.curseforge.com/minecraft/texture-packs/new-glowing-ores\">New Glowing Ores</a>。主要是因为 BSL 光影没有矿物发光，所以要加一个材质以确保有 fallback。</li>\n<li><a href=\"https://afdian.net/a/Nan2uu\">彩虹像素</a>，非常优秀的免费猛男材质包，原版风但更精致。有很多更可爱的附加包。</li>\n</ul>",
            "url": "https://sansui233.com/posts/2023-09-26-minecraft-settings-for-v1-20",
            "title": "Minecraft v1.20常用设置",
            "summary": "一些自用的Minecraft高版本设置",
            "date_modified": "2023-09-26T02:38:00.000Z",
            "date_published": "2023-09-26T02:38:00.000Z",
            "tags": [
                "游戏"
            ]
        },
        {
            "id": "https://sansui233.com/posts/2023-08-30-windows-tweak-and-enhancement",
            "content_html": "<p>自从感觉内存硬盘越来越不够用，以及对老黄的显卡需求，从 mac 换成了多年不见的 windows11 。做了非常多的调整，至现在基本稳定，记录下来以供参考。</p>\n<h2>基本调整与基础功能增强</h2>\n<ul>\n<li>\n<p><strong>右键菜单</strong></p>\n<p>使用 <a href=\"https://nilesoft.org/download\">shell</a>，恢复被藏到“更多选项”中的的右键菜单项，同时保持 win11 的设计风格。并且带有用 vscode 打开和用 windows Terminal 打开。虽然说 Windows Terminal 自己也有一个“用终端打开”，但那个有 Bug，打开的目录会被两个程序同时占用句柄，导致无法对目录本身进行操作。</p>\n</li>\n<li>\n<p><strong>批量重命名</strong></p>\n<p>使用 <a href=\"https://learn.microsoft.com/en-us/windows/powertoys/\">Powertoys</a> 中的 PowerRename，可选中多个文件后右键批量重命名，整理素材时太有用了。大致与 mac 的多文件重命名相同。缺点是不能改成 <code>同名称 + 编号</code> 。但系统自带的重命名恰好只能同名编号。Powertoys 有很多别的小工具，但都不够好用，按需关掉。</p>\n</li>\n<li>\n<p><strong>快速预览</strong></p>\n<p>使用 <a href=\"https://github.com/QL-Win/QuickLook\">QL-Win/QuickLook</a> ，选中文件后按空格直接预览，再按空格关闭。对于看各种后缀的文本文件、zip 压缩包目录结构非常有用。也用了 mac 后没法割舍的一个功能。前面说的 Powertoys 也有，但快捷键一定要加 ctrl（真的难按），功能更少，图片不能显示大小，无法定制。</p>\n</li>\n<li>\n<p><strong>文件快速搜索</strong></p>\n<p>使用 <a href=\"https://www.voidtools.com/\">Everything</a>，我大部分使用场景是在卸载程序后，清除残留的下载数据与用户数据。</p>\n</li>\n<li>\n<p><strong>快速启动/全局搜索</strong></p>\n<p><a href=\"https://fluentsearch.net/\">Fluent Search</a>，按 <code>alt+ 空格 </code> 快速在中央唤起搜索栏以快速进入目录、启动程序。相比于 windows 自带的 search，可以搜索到绿色程序。相比于 <a href=\"https://www.flowlauncher.com/\">Flow Launcher</a>，有好一万倍的排序。而更老的 <a href=\"https://www.listary.com/download\">Listary</a>，无法搜索绿色软件，排序也很拉。经过多次对比后，只有 Fluent Search 能在大量同名目录中快速定位到我要找的目录，而不会被一堆杂乱的东西包裹。</p>\n</li>\n<li>\n<p><strong>优化合集</strong></p>\n<p><a href=\"https://github.com/hellzerg/optimizer\">hellzerg/optimizer</a> 微调 windows 的合集程序，包括禁止系统更新、改 hosts 文件刷新 DNS、移除开机启动项、添加自定义右键菜单等。</p>\n</li>\n<li>\n<p><strong>历史剪贴板</strong>：在 <code>设置→系统→剪贴板</code> 中启用。</p>\n</li>\n<li>\n<p><strong>屏幕颜色配置文件(ICC Profile)</strong></p>\n<p>在 <code>设置→屏幕→显示配置文件</code> 中，换成对应屏幕的sRGB文件。否则对于广色域屏幕，某些不读 ICC Profile 的照片查看器会出现色彩过饱和的情况。</p>\n</li>\n<li>\n<p><strong>输入法</strong></p>\n<p>微软输入法需要改成回车时键入英文，否则会清空，不方便中英混输。不过作为一个五笔用户，我现在使用的是基于 Rime 的 <a href=\"http://98wb.ysepan.com/\">98五笔输入法</a> 和 <a href=\"https://github.com/Sansui233/98wubi\">我的配置</a>。<del>因为微软输入法 shift 加 空格会标点变全角，而这个功能在中英混输时非常容易触发，还不能改掉，实在太弱智了</del></p>\n</li>\n<li>\n<p><strong>关闭顶部自动布局</strong></p>\n<p>关闭 <code>系统→多任务处理→贴靠窗口</code>。此功能乍一看非常贴心，实则非常容易阻碍鼠标精准排列窗口，尤其是想把上沿拉到顶部时。不建议使用鼠标时开启，更适合手指操控设备。</p>\n</li>\n<li>\n<p><strong>多线程下载器</strong></p>\n<p>使用 <a href=\"https://aria2.github.io/\">aria2</a>，在网上抄了一个配置文件，并且让 chatgpt 写了一个开机自启脚本。面板使用的是 Chrome 插件 <a href=\"https://chrome.google.com/webstore/detail/mpkodccbngfoacfalldjimigbofkhgjn\">Aria2 Explorer</a>，考虑到都是在浏览器中下载，没必要使用独立的客户端 App。</p>\n</li>\n<li>\n<p><strong>与手机互传文件</strong>（折腾但稳定版）</p>\n<p>使用 <a href=\"https://github.com/alist-org/alist\">alist</a> 进行磁盘目录映射，并且使用 <a href=\"https://github.com/jeessy2/ddns-go/wiki\">DDNS-Go</a> 动态绑定本机的 ipv6 地址到公网。手机上将相应的 alist 页面添加到主屏幕，便可在该页面互传文件。好处是能走局域网，速度快，不同网络环境下可用，可远程传输等等。依然让 chatgpt 写脚本将两个程序加入开机启动。</p>\n</li>\n</ul>\n<h2>硬件调整</h2>\n<ul>\n<li>\n<p>硬件信息监测</p>\n<p>使用<a href=\"https://www.hwinfo.com/\">hwinfo</a>的实时监测数据作为硬件调整的基准</p>\n</li>\n<li>\n<p>功耗/风扇转速调整</p>\n<p>使用 <a href=\"https://github.com/seerge/g-helper\">g-helper</a> 调整日常使用的风扇曲线。我买的幻16，作为全能本，出厂的奥创调教特别垃，首发时还有bug。它的三种模式</p>\n<ol>\n<li>静音模式风扇完全不转，经常温度突然飙升很吵地转一会儿</li>\n<li>性能模式开什么都以游戏本的方式转，对我来说挺吵的</li>\n<li>增强模式的声音不是给人用的。</li>\n</ol>\n<p>如果用windows默认电源管理方案的话，似乎和程序资源占用有关，即使只有60度也给转上4000转。打个小游戏真的不配这么吵……</p>\n<p>后面用g-helper关闭睿频，功耗限制35w。测下来开原神默认高画质 1080p 稳定在CPU 65度，风扇3500转，不卡。这代 GPU 的散热反而问题不大，至少玩原神不会超过60度。然后测试了带光影的 Minecraft 1.20.1。MC 对 CPU 的要求更高，不过单机的话，不刻意刷红石，35w也够了，一般在25w左右，温度还是差不多的65度，全程电压没有超过1V，降压对于控温还是很有用的。奥创之所以动不动就吵就是因为一开性能模式，什么都不干电压给到1.8V……没必要，真的没必要。</p>\n<p>日常使用场景下，好像也就编译比较耗CPU，其他时候都用不到很好的CPU性能。图形处理还是占GPU更多。音乐制作一类的也是耗CPU但也还好，但更耗内存硬盘。</p>\n</li>\n</ul>\n<h2>音频调整</h2>\n<ul>\n<li>\n<p><strong><a href=\"https://sourceforge.net/projects/equalizerapo/files/\">Equalizer APO</a></strong></p>\n<p>调全局声音的均衡，需要搭配 <a href=\"https://github.com/jaakkopasanen/AutoEq\">Autoeq</a> 仓库中说的 peace 插件使用（现在好像直接叫autoeq.app）。耳机发烧友的必备。注意蓝牙耳机无法使用卷积eq。</p>\n</li>\n<li>\n<p><strong>内录用虚拟声卡：<a href=\"https://vb-audio.com/Cable/\">VBCABLE_Driver</a></strong></p>\n<p>网上有很多教程，为轻量级内录解决方案。另外如果系统带有 xbox，用 xbox 的录制视频是默认走的内录。</p>\n</li>\n<li>\n<p><strong>降低 Midi 键盘延迟</strong></p>\n<p>键盘连接电脑练琴，无独立声卡时，可用 <a href=\"https://asio4all.org/\">ASIO4ALL</a> 降低延迟。效果显著。缺点是 ASIO 是设备独占的，比如宿主软件使用 ASIO 到耳机，那看 b 站视频就只能外放（或者别的耳机/音响）。</p>\n</li>\n</ul>",
            "url": "https://sansui233.com/posts/2023-08-30-windows-tweak-and-enhancement",
            "title": "Windows 调整之基础功能与常用插件",
            "summary": "让 windows11 变得更好用的一些自定义设置",
            "date_modified": "2023-08-30T09:42:00.000Z",
            "date_published": "2023-08-30T09:42:00.000Z",
            "tags": [
                "工具"
            ]
        },
        {
            "id": "https://sansui233.com/posts/20230822-Super_resolution_models_and_tools",
            "content_html": "<p><del>推特</del>，现在叫 X.com，是我的桌面壁纸来源，但是推特的图压缩得非常糊，喜欢的动画人基本也只传 1080p 图，导致壁纸糊上加糊。因此需要使用 AI 放大模型进行图像处理。</p>\n<ul>\n<li>放大效果外链预览：<a href=\"https://imgsli.com/MjAwMDcx\">Comparison</a></li>\n<li>细节对比：<br/>\n<img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/comparison.jpg\" alt=\"\"/></li>\n</ul>\n<p>文章分为三个部分：</p>\n<ul>\n<li>图像处理工具</li>\n<li>AI 图像放大模型</li>\n<li>如何使用</li>\n</ul>\n<h2>图像处理工具</h2>\n<h3>1. <a href=\"https://github.com/chaiNNer-org/chaiNNer\">chaiNNer</a></h3>\n<p>一个无代码的图像处理自动化工具，可以实现批量改大小、调色、压缩、拼接等等等。同时也支持用 AI 对图像放大，也能接入 Stable Diffusion 的工作节点，上限非常高。缺点没有内置模板，即便是很小的功能（比如文件批量重命名）都需要自己创建。</p>\n<p>应用内置使用文档，不过不看文档也能一眼知道怎么用。</p>\n<p><strong>只有英文，没有中文。</strong></p>\n<ul>\n<li>传送门：<a href=\"https://chainner.app/\">chaiNNer</a></li>\n</ul>\n<h3>2. <a href=\"https://imagestool.com/zh_CN/\">imagestool</a></h3>\n<p>对于单张图和 gif 的常见处理小工具合集，网页打开即用，完全本地运行无隐私问题。特点是非常易用，支持小批量处理，支持 pipline，也就是说如果想在调整大小后转换格式再压缩，不需要每一步都上传下载图片，可以处理完每一步直接选下一步，只下载最终的处理结果。</p>\n<ul>\n<li>传送门：<a href=\"https://imagestool.com/zh_CN/\">imagestool</a></li>\n</ul>\n<h2>AI 图像放大模型</h2>\n<p>超分辨率成像(Super-Resolution，简称 SR) 是一种提高图像分辨率的技术，通俗的叫法就是图像放大。如果你曾经使用过 Photoshop 对小图进行放大，会发现放大后的边缘总是非常模糊，并且用锐化等操作无法弥补，这是传统方法的在图像放大上的缺陷。</p>\n<p>但是神经网络（Neural Networks，简称NN）的出现对图像放大的效果带来了极大的提升，几年前就已经有不少 AI 图像放大的应用，但最近两年的模型效果尤其好。下面介绍几个现阶段应用上比较火的模型。</p>\n<h3>1. <a href=\"https://github.com/JingyunLiang/SwinIR\">SwinIR</a></h3>\n<p>2021年基于 Transformer 的图像超分辨率模型，放大任何图片的效果都非常好。风格偏锐利且干净，且参数少，处理速度快。此模型分为 3 类，经典图像超分辨率（Classical image SR）、轻量级图像超分辨率（Lightweight image SR）、真实世界图像超分辨率（Real-world image SR）。</p>\n<ul>\n<li>下载链接： <a href=\"https://github.com/JingyunLiang/SwinIR/releases/tag/v0.0\">Release  · JingyunLiang/SwinIR</a></li>\n</ul>\n<p>可下载的版本很多，不知道选哪个的就选 <a href=\"https://github.com/JingyunLiang/SwinIR/releases/download/v0.0/001_classicalSR_DIV2K_s48w8_SwinIR-M_x4.pth\">001_classicalSR_DIV2K_s48w8_SwinIR-M_x4.pth</a> ，这个为4倍放大的模型，也是 Stable Diffusion 的 SwinIR 预置模型。</p>\n<h3>2. <a href=\"https://github.com/xinntao/Real-ESRGAN\">Real-ESRGAN</a></h3>\n<p>2021年的经典图像超分辨率模型，这论文出来后大家疯狂在它基础上卷，基于 ESRGAN 改进的模型和论文非常非常多。不过最初的版本也已经足够好用。</p>\n<p>下载链接：<a href=\"https://github.com/xinntao/Real-ESRGAN/releases\">Releases · xinntao/Real-ESRGAN</a></p>\n<p>依旧版本很多，不知道下哪个的下载 <a href=\"https://github.com/xinntao/Real-ESRGAN/releases/download/v0.1.1/RealESRNet_x4plus.pth\">RealESRNet_x4plus.pth</a> 即可。</p>\n<h3>3. 4x-AnimeSharp</h3>\n<p>基于 ESRGAN 架构的动漫类放大，<del>可能由于训练集选得好</del>，在众多动漫类放大中它可以很好地处理景深，其他的Anime模型多少在景深部分会有一些清晰过度的问题，包括著名的 <a href=\"https://github.com/xinntao/Real-ESRGAN/releases/download/v0.2.2.4/RealESRGAN_x4plus_anime_6B.pth\">RealESRGAN 动漫模型</a></p>\n<ul>\n<li>下载链接：<a href=\"https://openmodeldb.info/models/4x-AnimeSharp\">AnimeSharp - OpenModelDB</a></li>\n</ul>\n<p>OpenModelDB.info 上有更多的微调模型，可以试试。总体来说，AI 放大的图像质量目前来说还是乍一看可以，涉及商用美术的话质量仍然不过关。<del>如果商用美术能过关，岂不是能画糊图然后丢AI出高精图了。</del> 作为壁纸放大非常合适，即便是补充的细节不能推敲，但把像素精度补齐到屏幕分辨率带来的视觉提升也是非常大的。4k 壁纸就是比 1080p 看起来舒服。</p>\n<h2>如何使用</h2>\n<p>使用 chaiNNer 时可照抄下图结构，使用 4x-AnimeSharp 模型放大原图、重命名图片并保存。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-22%20213633.jpg\" alt=\"chaiNNer\"/></p>\n<p>如果使用的是 <a href=\"https://github.com/AUTOMATIC1111/stable-diffusion-webui\">stable-diffusion-webui</a> ，Extra Network 选项卡中也有预置模型，可以使用 SwinIR 和 ESRGAN。</p>\n<hr/>\n<p>可能有用的资料：</p>\n<ul>\n<li><a href=\"https://openmodeldb.info/models/4x-AnimeSharp\">4x-AnimeSharp</a></li>\n<li><a href=\"https://phhofm.github.io/upscale/\">Interactive Visual Comparison of Upscaling Models</a></li>\n</ul>\n<hr/>\n<p>PS：强烈建议无代码应用都开发个 template market……不要做一堆功能摆那里就自由发挥了啊诶！当发现要什么工作流很难做时就会感知到这些无代码 App 的问题所在了……在实际应用场景中很烂！很难做！说的就是comfyui……</p>",
            "url": "https://sansui233.com/posts/20230822-Super_resolution_models_and_tools",
            "title": "图像超分辨率工具推荐",
            "summary": "AI图像放大模型+工具推荐",
            "date_modified": "2023-08-22T22:20:00.000Z",
            "date_published": "2023-08-22T22:20:00.000Z",
            "tags": [
                "工具"
            ]
        },
        {
            "id": "https://sansui233.com/posts/2023-02-20-stable-diffusion-AI-experience",
            "content_html": "<p>2023-03-03：待大量补充和修订。</p>\n<hr/>\n<p>进阶经验，非科普。分为五个部分：模型选择，分辨率调整，采样方法，ControlNet，Lora概述。</p>\n<p>此文章涉及多平台发布，由于生成类 AI 的争议，文中无外链推荐。</p>\n<h2>一、模型选择</h2>\n<p>模型影响构图和笔触和色彩，决定成图的平均水平。社区经常都在换流行的模型，还是根据需求定，huggingface 和 civitai 上很多。</p>\n<p>二次元目前主流三家 Anything Orange Counterfeit 。</p>\n<p>目前有不少混合了 2D 和 3D 的 2.5D 模型，用来出 cos 的，个人不喜欢。</p>\n<p>下图模型为 pastel-mix，图片画质已严重压缩（看不见则需要开代理，如果你用的 Innoreader 手机版阅读此文，大概率被放头图了）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/00153-2596022983-masterpiece,%20best%20quality,%20ultra-detailed,%20illustration,%201boy,%20Link%20in%20Breath%20of%20the%20wild,%20sun%20shine,water,%20on%20back,%20lying%20in%20wa.jpg\" alt=\"pastel-mix\"/></p>\n<h3>模型精度选择</h3>\n<p>fp-16(2G)，fp-32(4G)，full(7G) 用于生产没有肉眼可见的区别。full 主要是训练用的。fp16 生产够用了，快，占用小。</p>\n<p>bf-16(2G) 相对 fp-16 会损失一小部分细节，不推荐，会发布 bf-16 版本的模型也较少。</p>\n<h3>VAE权重网络</h3>\n<p>影响色彩，主观效果是增加饱和度（比修图软件饱和度增强好太多）。目前流行的 VAE 就两个，一个 Waifu 的一个 Anything 的，很多带 vae 模型都是用的这两个改了个名字。</p>\n<p>下图为 mix-pro-v3-fp16 模型，叠加了其配套的 WD vae 的 效果。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/00045-311454338-Original%20Characters,%201boy,%20sea%20shore,%20%20pastel-full.jpg\" alt=\"Mix-pro-v3\"/></p>\n<h3>Prompt</h3>\n<p>prompt（提示词）是玄学范围。不同模型的 prompt 词库不一，目前主流的词库有两个</p>\n<ul>\n<li>适用 SD v1.x 及其衍生模型的 lexica</li>\n<li>适用二次元模型的 Danbooru。</li>\n</ul>\n<p>对于二次元模型，Prompt 指定物体，调整动作、指定颜色比较容易。取决于模型的泛化能力。</p>\n<p>Prompt 难以精确控制画风，所以尽管上限非常高，但主流越来越不倾向于用大量 Prompt 叠 buf，转成微调模型以达成精确需求。</p>\n<p>在两个月前关于 Prompt 研究的文档就已经非常多了，这里不做推荐，因为不看文档，直接翻译成英文大概率是有效的。</p>\n<h3>文生图与图生图</h3>\n<p>文生图与图生图本质上没有什么不同，文生图只是将图片输入换成了一张随机的噪声图。</p>\n<h2>二、分辨率</h2>\n<p>不同模型在生成时有最佳的分辨率，大部分都在 512px 左右，不超过 1024px。</p>\n<p>提高分辨率不仅是单纯放大图片，AI 能够用模型细化图片。</p>\n<h3>图生图</h3>\n<p>img2img(图生图) 大部分时候被用来衍生，但是其效果最好的是将 txt2img 的低分辨率图放大（用同一个seed）。</p>\n<p>在 web-ui 中，仅缩放(just-resize)为无 AI 的放大算法处理。 AI 放大使用的 Latent 方法即将被归入 Upscaler，也就是下面说的 Hires fix。</p>\n<h3>Hires fix</h3>\n<p>Hires fix（高清修复）的作用是用 AI 从小图生成高分辨率图，处理用得好可以提高大幅提高图片上限。upscaler（放大器）可选几种放大方法，其中的 Latent 就是 SD 的画图方法，文生图与图生图均是这个方法。</p>\n<p>在 web-ui 中， 默认只有 txt2img 可用，因为 img2img 本身就可以做图片放大。另外，有专门的 upscaler 选项卡。</p>\n<p>使用 Latent upscaler (图生图) 放大到高分辨率图涉及局部重绘，部分模型支持较好，如 Pastel。但在 512 px 完成度就很高的模型上通常没有效果，或者更差（比如炫彩厚涂），这种用 GAN 类 Upscaler 直接放大比较好。</p>\n<p>值得注意的是 web-ui 的 Hires fix 有两版算法，目前 txt2img 是新版， img2img是旧版，效果有一些小差别，很难比较好坏。</p>\n<h2>三、采样方法</h2>\n<p>Sampler（采样方法） 决定笔触和结构的稳定性。常用的有：</p>\n<ul>\n<li>Euler a 是一个规整稳定的采样方法，出的图较平滑</li>\n<li>DDIM 是一个过程不算稳定的采样方法，通常看起来比 Euler a 细节更多</li>\n<li>DPM++ 2M Karas，最近在用的，过程稳定但有细节</li>\n</ul>\n<p>有部分 Sampler 对高分辨率（1024px 以上）支持不好。</p>\n<h2>四、 ControlNet</h2>\n<p>ControlNet 目前是一个需要额外安装的插件，可以用于给线稿上色并细化，或从草图细化。</p>\n<p>你的草图可以决定的是：</p>\n<ul>\n<li>60%-100% 的线条位置（构图）</li>\n<li>主要色块位置。需要搭配图生图，并且色块越碎越好，需要提前做好整体的光影效果。因为 大部分 AI 只会画整，会画碎的比较少（Pastel 会画碎）。</li>\n</ul>\n<p>细化风格（画风）由模型决定，不由你的草稿决定。模型风格对于画风影响非常关键。Prompt 也可以影响画风。</p>\n<p>细化内容（画的具体是什么）由 Prompt 、草稿、模型共同决定，调整 CFG、Denoise 、 ControlNet 的 Weight 可改变三者比例。</p>\n<p>下图为自己的较草的线稿使用 ControlNet 与 Anything V3.0 上色：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/00275-3225619170-masterpiece,%20best%20quality,%20illustration,face,%20right%20hand,%20atomespheric,%20cold,%20sunshine,%20sky,,%20high%20detail,%20flowers%20and%20leafs.jpg\" alt=\"Control-Net\"/></p>\n<p>（这个东西出名是因为某博说 ControlNet 初衷是洗稿……之前 Pixiv 也出过线稿上色的 AI，只是效果好和不好的差别，怎么没人说是搭配 PS 的线稿提取功能洗稿）</p>\n<h2>五、Lora</h2>\n<p>Lora 是一种训练小模型的方法，可以在 15 张图以上生成稳定的单个角色图。</p>\n<p>已有大量角色图积累的流水线漫画苦力会比较省事，搭配 ControlNet 可生成固定姿势，或者使用线稿稳定地上色。但对于连续动作的细微差别不太行，细节演出表现依旧需要依赖线稿，或手动重绘</p>\n<p>训练过程分为裁剪、自动打标、训练，最终生成约 100M 左右的 Lora 网络。Web-ui 已自带。</p>\n<h2>写在后面</h2>\n<p>风格迁移渐渐成熟了，过拟合的问题在逐渐减少。减少过拟合的最终解决思路，还是把端到端的网络，按需求拆成了人为可控的 pipline。个人认为 AI 如果真的要作为工具，模块化的 pipline 是终点。</p>\n<p>直接出成图的是对已有作品的模拟，抽抽卡，融入不到创意的工作流。</p>\n<p>但是在发展好之前，地球可能已经枯竭了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/00162-1748765688-masterpiece,%20best%20quality,%20ultra-detailed,%20illustration,%201boy,%20Link%20in%20Breath%20of%20the%20wild,%20stronde%20hair,%20sun%20shine,water,%20emotio.jpg\" alt=\"pastel-mix\"/></p>",
            "url": "https://sansui233.com/posts/2023-02-20-stable-diffusion-AI-experience",
            "title": "Stable Diffusion AI 绘画的实用经验与总结",
            "summary": "AI 画画现状",
            "date_modified": "2023-02-21T00:00:00.000Z",
            "date_published": "2023-02-21T00:00:00.000Z",
            "tags": [
                "工具"
            ]
        }
    ]
}